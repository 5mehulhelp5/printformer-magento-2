<?php
/** @var \Rissc\Printformer\Block\Catalog\Product\View\Printformer $block */
$block->cleanupDraftSession();
?>

<?php if($block->getProduct()->isSalable()): ?>
    <?php foreach($block->getCatalogProductPrintformerProducts() as $_catalogProductPrintformerProduct): ?>
        <?php $_printformerProduct = $_catalogProductPrintformerProduct->getPrintformerProduct() ?>
        <div class="printformer-actions box-tocart">
            <button id="printformer-button-<?php echo $_printformerProduct->getId() ?>"
                    type="button"
                    data-pf-masterid="<?php echo $_printformerProduct->getMasterId(); ?>"
                    data-pf-type="editor"
                    data-pf-intent="<?php echo $_printformerProduct->getIntent(); ?>"
                    class="printformer-preselect action primary tocart printformer-button <?php echo $block->getButtonCss($_catalogProductPrintformerProduct) ?>"
                    disabled="disabled">
                <?php if($_printformerProduct->getIntent() == 'upload' || $_printformerProduct->getIntent() == 'upload-and-editor'): ?>
                    <span><?php echo __('Upload') ?></span>
                <?php else: ?>
                    <span><?php echo __($block->getButtonText()) ?></span>
                <?php endif; ?>
            </button>
            <?php if ($block->canShowDeleteButton()): ?>
                <button id="printformer-delete-<?php echo $_printformerProduct->getId() ?>"
                        data-printformer-product="<?php echo $_printformerProduct->getId() ?>"
                        data-printformer-master="<?php echo $_printformerProduct->getMasterId(); ?>"
                        data-product-id="<?php echo $block->getProduct()->getId(); ?>"
                        class="action primary tocart printformer-delete"
                        disabled="disabled"
                        style="display: none"></button>
                <div id="printformer-delete-confirm-<?php echo $_printformerProduct->getId() ?>">
                    <p><?php echo __($block->getDeleteConfirmText()); ?></p>
                </div>
            <?php endif; ?>
        </div>
    <?php endforeach; ?>

    <div id="printformer-editor-main" title="<?php echo $block->getProduct()->getName() ?>">
    </div>
    <div id="printformer-editor-close">
        <p><?php echo __($block->getCloseNoticeText()) ?></p>
    </div>
    <?php if ($block->isFormatChangeNotice()): ?>
        <div id="printformer-editor-notice">
            <p><?php echo __($block->getFormatNoticeText()) ?></p>
        </div>
    <?php endif; ?>
<?php endif;?>