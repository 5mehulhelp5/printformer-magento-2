<<<<<<< HEAD
(function(a){if(typeof define==="function"&&define.amd){define(["jquery","jquery/ui","Magento_Ui/js/modal/modal","mage/translate"],a)}else{a(jQuery)}}(function(b){var a=function(e,d,c){this.element=(e instanceof b)?e:b(e);this.options=c;return this.init(d)};a.prototype={init:function(c){if(c=="session"){return this.sessionData()}else{if(c=="preselect"){return this.preselect()}else{return this}}},isDefined:function(c){return typeof c!==typeof undefined},preselect:function(){return this.preselectAction.init(this,this.options)},sessionData:function(){return this.sessionDataAction.init(this,this.options)}};a.prototype.preselectAction={init:function(d,c){this.parentObject=d;this.options=c;return this},initButton:function(){var c=this;var d=c.options.saveUrl;b(this.parentObject.element).click(function(){var e=c.getAllOptions();b.ajax({url:d,method:"post",data:{product_options:JSON.stringify(e)}}).done(function(f){})});return this},getPreselectedOptions:function(){var d=this;if(typeof this.options.preselected!=typeof undefined&&typeof this.options.preselected.product_options!=typeof undefined){var c=this.options.preselected.product_options;d.preselectOptions(c);b(document).trigger("printformer_preselect_options_after")}else{b.ajax({url:this.options.optionsUrl,method:"get",dataType:"json"}).done(function(e){d.preselectOptions(e);b(document).trigger("printformer_preselect_options_after");return true})}return this},preselectOptions:function(e){var i=this;if(e!=null){if(this.parentObject.isDefined(e)){if(e.product==this.options.currentProduct){var j=false;var f=".price-model-box";if(b(f).length){j=true;var d=b(f).find(":input");b.each(d,function(n,m){if(b(m).attr("type")=="radio"){var l=b(m).val();if(i.parentObject.isDefined(e.pricemodel)){if(i.parentObject.isDefined(e.pricemodel.value)){if(l.length&&l==e.pricemodel.value){b(m).prop("checked",true)}}}}})}if(this.parentObject.isDefined(e.qty)&&this.parentObject.isDefined(e.qty.value)){var h="#qty";if(b(h).length){b(h).val(e.qty.value);b(h).trigger("change")}}var g=".product-fees";if(b(g).length){var c=b(g).children(".fee.field");b.each(c,function(o,l){var m=b(l).children(".fee-option");var n=b(m).data("fee-id");if(typeof e.product_fees!==typeof undefined&&typeof e.product_fees[n]!==typeof undefined){if(e.product_fees[n].value==true){b(m).prop("checked",true)}}})}var k=b(".product-options-wrapper :input");b.each(k,function(n,m){if(b(m).hasClass("product-custom-option")&&b(m).is("textarea")){var l=b(m).attr("id");if(i.parentObject.isDefined(e[l])){b(m).val(e[l].value)}}if(b(m).hasClass("product-custom-option")&&b(m).attr("type")=="text"){var l=b(m).attr("id");if(i.parentObject.isDefined(e[l])){b(m).prop("value",e[l].value)}}if(b(m).hasClass("product-custom-option")&&b(m).attr("type")=="checkbox"){var o=b(m).attr("id");if(i.parentObject.isDefined(e[o])&&e[o].value==b(m).val()){b(m).prop("checked",true)}}if(b(m).prop("tagName").toLowerCase()=="select"&&b(m).hasClass("product-custom-option")){b.each(e,function(p,q){if(b(m).data("selector")=="options["+p+"]"){b(m).val(q.value)}})}if(b(m).hasClass("product-custom-option")&&b(m).attr("type")=="radio"){b.each(e,function(p,q){if(b(m).data("selector")=="options["+p+"]"&&b(m).val()==q.value){b(m).prop("checked",true)}})}b(m).trigger("change")})}}}return this},getAllOptions:function(){var k=b(".product-options-wrapper .product-custom-option");var c={};c.product=this.options.currentProduct;var i=[];b.each(b(k),function(n,o){var m=null,p=null,l=null;if(b(o).prop("tagName").toLowerCase()=="select"){m=b(o).attr("data-selector").match(/options\[(\d+)\]/);p=m[1];l=b(o).val();if(l.length){c[p]={value:l}}}if(b(o).is("textarea")){p=b(o).attr("id");l=b(o).val();if(l.length){c[p]={value:l}}}if(b(o).attr("type")=="text"){p=b(o).attr("id");l=b(o).val();if(l.length){c[p]={value:l}}}if(b(o).attr("type")=="radio"){if(b(o).prop("checked")){m=b(o).attr("data-selector").match(/options\[(\d+)\]/);p=m[1];l=b(o).val();if(l.length){c[p]={value:l}}}}if(b(o).attr("type")=="checkbox"){i.push(o)}});b.each(i,function(m,n){if(b(n).prop("checked")){var l=b(n).val();if(l.length){c[b(n).attr("id")]={value:l}}}});var j="#qty";if(b(j).length){var f=b(j).val();if(f.length){c.qty={value:f}}}var h=".product-fees";if(b(h).length){var d=b(h).children(".fee.field");b.each(d,function(o,l){var m=b(l).children(".fee-option");var n=b(m).data("fee-id");if(b(m).prop("checked")){if(!(typeof c.product_fees=="object")){c.product_fees={}}c.product_fees[n]={value:b(m).prop("checked")}}})}var g=".price-model-box";if(b(g).length){var e=b(g).find(":input");b.each(e,function(o,m){if(b(m).attr("type")=="radio"){if(b(m).prop("checked")){var n=b(m).attr("data-selector").match(/options\[(\d+)\]/);var l=b(m).val();if(l.length){c.pricemodel={value:l}}}}})}return c}};a.prototype.sessionDataAction={init:function(d,c){this.parentObject=d;this.options=c;this.initButton();return this},initButton:function(){var c=this;return this},getSavedEditorCalls:function(c){var d=this;b(this.parentObject.element).click(function(f){f.preventDefault();b.ajax({url:c,method:"get",dataType:"json"}).done(function(g){if(g!==null){var e=b("<div/>").html("<h2>"+b.mage.__("You've made two Drafts. Please select the one you want to add to cart.")+"</h2>");var i=b("<select/>");var j=[];var h=0;b.each(g,function(n,k){var m=k.draft_id;var o=k.intent;var l=b("<option/>").val(m).text(b.mage.__("draft-"+n)).data("pf-intent",o);j[m]=o;b(i).append(b(l));h++});b(e).append(b(i));if(h>1){b(e).modal({autoOpen:true,responsive:true,clickableOverlay:true,type:"popup",buttons:[{text:b.mage.__("Confirm"),attr:{"data-action":"confirm"},"class":"action-primary",click:function(){var k=b("#printformer_draftid");var l=b("#printformer_intent");if(b(k).length&&b(l).length){b(k).val(b(i).val());b(l).val(j[b(i).val()])}this.closeModal();d.deleteDraftSessionAndSubmit(c,b(i).val())}}]})}else{d.deleteDraftSessionAndSubmit(c)}}else{d.deleteDraftSessionAndSubmit(c)}});return false});return this},deleteDraftSessionAndSubmit:function(d,c){var e=d+"?delete=true";if(typeof c!=typeof undefined&&c!=null){e+="&excludeDraft="+c}b.ajax({url:e,method:"get",dataType:"json"}).done(function(){b("#product_addtocart_form").trigger("submit")})}};return a}));
=======
(function(a){if(typeof define==="function"&&define.amd){define(["jquery","jquery/ui","Magento_Ui/js/modal/modal","mage/translate"],a)}else{a(jQuery)}}(function(b){var a=function(e,d,c){this.element=(e instanceof b)?e:b(e);this.options=c;return this.init(d)};a.prototype={init:function(c){if(c=="session"){return this.sessionData()}else{if(c=="preselect"){return this.preselect()}else{return this}}},isDefined:function(c){return typeof c!==typeof undefined},preselect:function(){return this.preselectAction.init(this,this.options)},sessionData:function(){return this.sessionDataAction.init(this,this.options)}};a.prototype.preselectAction={init:function(d,c){this.parentObject=d;this.options=c;this.overlayDiv=null;return this},initButton:function(){var c=this;var d=c.options.saveUrl;b(this.parentObject.element).click(function(){var e=c.getAllOptions();var f=new Date().getTime();b.ajax({url:d+"?_="+f,method:"post",data:{product_options:JSON.stringify(e)}}).done(function(g){alert("that worked!")})});return this},addOverlayLoader:function(c){if(b(c).length){var e=this;this.overlayDiv=b("<div/>");var f=b(c).position();var d={w:b(c).width(),h:b(c).height(),x:f.left,y:f.top};b(this.overlayDiv).css({position:"absolute","z-index":"3",width:d.w+"px",height:d.h+"px",left:"auto",top:"auto","background-color":"#FFF",opacity:"0.75","background-image":"url('"+e.options.loaderImage+"')","background-repeat":"no-repeat","background-position":"center"});b(c).before(b(this.overlayDiv))}return this},removeOverlay:function(){if(b(this.overlayDiv).length){b(this.overlayDiv).remove()}return this},getPreselectedOptions:function(){var d=this;if(typeof this.options.preselected!=typeof undefined&&typeof this.options.preselected.product_options!=typeof undefined){var c=this.options.preselected.product_options;d.preselectOptions(c);b(document).trigger("printformer_preselect_options_after")}else{b.ajax({url:this.options.optionsUrl,method:"get",dataType:"json"}).done(function(e){d.preselectOptions(e);b(document).trigger("printformer_preselect_options_after");return true})}return this},preselectOptions:function(e){var i=this;if(e!=null){if(this.parentObject.isDefined(e)){if(e.product==this.options.currentProduct){var j=false;var f=".price-model-box";if(b(f).length){j=true;var d=b(f).find(":input");b.each(d,function(n,m){if(b(m).attr("type")=="radio"){var l=b(m).val();if(i.parentObject.isDefined(e.pricemodel)){if(i.parentObject.isDefined(e.pricemodel.value)){if(l.length&&l==e.pricemodel.value){b(m).prop("checked",true)}}}}})}if(this.parentObject.isDefined(e.qty)&&this.parentObject.isDefined(e.qty.value)){var h="#qty";if(b(h).length){b(h).val(e.qty.value)}}var g=".product-fees";if(b(g).length){var c=b(g).children(".fee.field");b.each(c,function(o,l){var m=b(l).children(".fee-option");var n=b(m).data("fee-id");if(typeof e.product_fees!==typeof undefined&&typeof e.product_fees[n]!==typeof undefined){if(e.product_fees[n].value==true){b(m).prop("checked",true)}}})}var k=b(".product-options-wrapper :input");b.each(k,function(m,l){if(b(l).hasClass("product-custom-option")&&b(l).attr("type")=="checkbox"){var n=b(l).attr("id");if(i.parentObject.isDefined(e[n])&&e[n].value==b(l).val()){b(l).prop("checked",true)}}if(b(l).prop("tagName").toLowerCase()=="select"&&b(l).hasClass("product-custom-option")){b.each(e,function(o,p){if(b(l).data("selector")=="options["+o+"]"){b(l).val(p.value)}})}if(b(l).hasClass("product-custom-option")&&b(l).attr("type")=="radio"){b.each(e,function(o,p){if(b(l).data("selector")=="options["+o+"]"&&b(l).val()==p.value){b(l).prop("checked",true)}})}b(l).trigger("change")})}}}return this},getAllOptions:function(){var k=b(".product-options-wrapper .product-custom-option");var c={};c.product=this.options.currentProduct;var i=[];b.each(b(k),function(n,o){var m=null,p=null,l=null;if(b(o).prop("tagName").toLowerCase()=="select"){m=b(o).attr("data-selector").match(/options\[(\d+)\]/);p=m[1];l=b(o).val();if(l.length){c[p]={value:l}}}if(b(o).attr("type")=="radio"){if(b(o).prop("checked")){m=b(o).attr("data-selector").match(/options\[(\d+)\]/);p=m[1];l=b(o).val();if(l.length){c[p]={value:l}}}}if(b(o).attr("type")=="checkbox"){i.push(o)}});b.each(i,function(m,n){if(b(n).prop("checked")){var l=b(n).val();if(l.length){c[b(n).attr("id")]={value:l}}}});var j="#qty";if(b(j).length){var f=b(j).val();if(f.length){c.qty={value:f}}}var h=".product-fees";if(b(h).length){var d=b(h).children(".fee.field");b.each(d,function(o,l){var m=b(l).children(".fee-option");var n=b(m).data("fee-id");if(b(m).prop("checked")){if(!(typeof c.product_fees=="object")){c.product_fees={}}c.product_fees[n]={value:b(m).prop("checked")}}})}var g=".price-model-box";if(b(g).length){var e=b(g).find(":input");b.each(e,function(o,m){if(b(m).attr("type")=="radio"){if(b(m).prop("checked")){var n=b(m).attr("data-selector").match(/options\[(\d+)\]/);var l=b(m).val();if(l.length){c.pricemodel={value:l}}}}})}return c}};a.prototype.sessionDataAction={init:function(d,c){this.parentObject=d;this.options=c;this.initButton();return this},initButton:function(){var c=this;return this},getSavedEditorCalls:function(c){var d=this;b(this.parentObject.element).click(function(f){f.preventDefault();b.ajax({url:c,method:"get",dataType:"json"}).done(function(g){if(g!==null){var e=b("<div/>").html("<h2>"+b.mage.__("You've made two Drafts. Please select the one you want to add to cart.")+"</h2>");var i=b("<select/>");var j=[];var h=0;b.each(g,function(n,k){var m=k.draft_id;var o=k.intent;var l=b("<option/>").val(m).text(b.mage.__("draft-"+n)).data("pf-intent",o);j[m]=o;b(i).append(b(l));h++});b(e).append(b(i));if(h>1){b(e).modal({autoOpen:true,responsive:true,clickableOverlay:true,type:"popup",buttons:[{text:b.mage.__("Confirm"),attr:{"data-action":"confirm"},"class":"action-primary",click:function(){var k=b("#printformer_draftid");var l=b("#printformer_intent");if(b(k).length&&b(l).length){b(k).val(b(i).val());b(l).val(j[b(i).val()])}this.closeModal();d.deleteDraftSessionAndSubmit(c,b(i).val())}}]})}else{d.deleteDraftSessionAndSubmit(c)}}else{d.deleteDraftSessionAndSubmit(c)}});return false});return this},deleteDraftSessionAndSubmit:function(d,c){var e=d+"?delete=true";if(typeof c!=typeof undefined&&c!=null){e+="&excludeDraft="+c}b.ajax({url:e,method:"get",dataType:"json"}).done(function(){b("#product_addtocart_form").trigger("submit")})}};return a}));
>>>>>>> origin/latest-andre
